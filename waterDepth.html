<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>

let inp = [0,1,0,2,1,0,1,3,2,1,2,1];






let allWater = 0;
let max = Math.max(...inp);

for (let j = 1; j <= max; j++) {

    let blocks = [];
    let water = [];

    for (let i = 0; i < inp.length; i++) {

        if(inp[i] >= j) { 
            blocks.push(i);
        } else { 
            water.push(i); }
            
    }

    water.forEach(a => { if (a > blocks[0] && a < blocks[blocks.length - 1]) allWater++; });

}


console.log(allWater);



    </script>
</body>
</html>